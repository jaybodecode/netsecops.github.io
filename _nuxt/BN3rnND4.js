import{_ as Y}from"./CYLgDeRt.js";import{_ as Z}from"./CHWp06qG.js";import{d as ee}from"./B_JnKZ9F.js";import{h as te}from"./crG6u2v1.js";import{h as B,N as T,e as S,O as U,j as L,P as ae,D as se,Q as ne,R as V,S as oe,U as le,V as re,C as ie,b as f,W as z,X as qe,M as ce,Y as de,Z as ue,J as pe,K as ve,a0 as D,m as me,F,a1 as fe,A as he,l as ge,u as ye,c as E,p as c,a as n,t as C,d as R,w as _e,o as $}from"#entry";import{a as xe}from"./BANvTrWy.js";const j="_islandPromises",H=/data-island-uid="([^"]*)"/,we=/data-island-uid(="")?(?!="[^"])/g,be=/data-island-slot="([^"]*)"/g,Se=/ data-island-slot="([^"]*)"[^>]*>/g,Ae=/^<[^> ]*/;let Ce=1;const Re=()=>(Ce++).toString();const ke=B({name:"NuxtIsland",inheritAttrs:!1,props:{name:{type:String,required:!0},lazy:Boolean,props:{type:Object,default:()=>{}},context:{type:Object,default:()=>({})},scopeId:{type:String,default:()=>{}},source:{type:String,default:()=>{}},dangerouslyLoadClientComponents:{type:Boolean,default:!1}},emits:["error"],async setup(t,{slots:d,expose:A,emit:k}){let v=!1;const o=T(0),y=T(0),_=S(()=>U),l=L(null),I=pe(),i=ae(),h=S(()=>t.props?Object.fromEntries(Object.entries(t.props).filter(([s])=>!s.startsWith("data-v-"))):{}),a=S(()=>te([t.name,h.value,t.context,t.source]).replace(/[-_]/g,"")),u=V(),M=void 0;let x;const K=globalThis.fetch,P=T(!1);se(()=>{P.value=!0,o.value++}),ne(()=>{x&&x.dispose()});function G(s,e){const r={};e.props&&(r.props=e.props),e.slots&&(r.slots=e.slots),e.components&&(r.components=e.components),e.head&&(r.head=e.head),i.payload.data[s]={__nuxt_island:{key:s,params:{...t.context,props:t.props?JSON.stringify(t.props):void 0},result:r},...e}}const g={};if(u.vnode.el){const s=oe(i.payload.data[`${t.name}_${a.value}`])?.slots;s&&(g.slots=s)}const w=L("");if(u.vnode?.el){w.value=le(u.vnode.el,!0)?.join("")||"";const s=`${t.name}_${a.value}`;i.payload.data[s]||={},i.payload.data[s].html=w.value.replaceAll(new RegExp(`data-island-uid="${w.value.match(H)?.[1]||""}"`,"g"),'data-island-uid=""')}const b=L(w.value.match(H)?.[1]||Re()),J=new Set(Object.keys(d)),q=S(()=>new Set([...w.value.matchAll(be)].map(s=>s[1]))),N=S(()=>{let s=w.value;if(t.scopeId&&(s=s.replace(Ae,e=>e+" "+t.scopeId)),!_.value)for(const[e,r]of Object.entries(g.components||{}))s=s.replace(new RegExp(` data-island-uid="${b.value}" data-island-component="${e}"[^>]*>`),m=>m+r.html);return g.slots?s.replaceAll(Se,(e,r)=>J.has(r)?e:e+(g.slots?.[r]?.fallback||"")):s}),Q=re();async function W(s=!1){const e=`${t.name}_${a.value}`;if(!s&&i.payload.data[e]?.html)return i.payload.data[e];const r=`/__nuxt_island/${e}.json`,m=await K(de(t.source?r:ue(I.app.baseURL??"",r),{...t.context,props:t.props?JSON.stringify(t.props):void 0}));if(!m.ok)throw ve({statusCode:m.status,statusMessage:m.statusText});try{const p=await m.json();return G(e,p),p}catch(p){throw m.status!==200?new Error(p.toString(),{cause:m}):p}}async function O(s=!1){i[j]||={},i[j][b.value]||=W(s).finally(()=>{delete i[j][b.value]});try{const e=await i[j][b.value];w.value=e.html.replaceAll(we,`data-island-uid="${b.value}"`),y.value++,l.value=null,g.slots=e.slots||{},g.components=e.components||{},e?.head&&(x?x.patch(e.head):x=Q.push(e.head)),ce(()=>{v=!0,o.value++})}catch(e){l.value=e,k("error",e)}}return A({refresh:()=>O(!0)}),ie(t,ee(()=>O(),100),{deep:!0}),!u.vnode.el&&t.lazy?O():(!u.vnode.el||!i.payload.serverRendered)&&await O(),(s,e)=>!N.value||l.value?[d.fallback?.({error:l.value})??f("div")]:[z([y.value],()=>f(F,{key:y.value},[D(me(N.value||"<div></div>",1))]),e,0),z([o.value],()=>{const r=[],m=o.value===0||!!(o.value&&!(o.value%2));if(b.value&&N.value&&(t.lazy?v:P.value||u.vnode?.el))for(const p in d)q.value.has(p)&&r.push(f(fe,{to:`${m?"div":""}[data-island-uid="${b.value}"][data-island-slot="${p}"]`},{default:()=>(g.slots?.[p]?.props?.length?g.slots[p].props:[{}]).map(X=>d[p]?.(X))}));return D(F,r)},e,1)]}}),Ie=t=>B({name:t,inheritAttrs:!1,props:{lazy:Boolean},emits:["error"],setup(d,{attrs:A,slots:k,expose:v,emit:o}){const y=V(),_=L(null);return v({refresh:()=>_.value?.refresh()}),()=>D(ke,{name:t,lazy:d.lazy,props:A,scopeId:y?.vnode.scopeId,ref:_,onError:l=>{o("error",l)}},k)}}),Oe=Ie("OGImageCard"),Ee={class:"min-h-screen bg-gray-950 flex items-center justify-center p-8"},$e={key:0,class:"text-center"},je={key:1,class:"text-center"},Le={class:"text-gray-400 mb-4"},Ne={class:"text-sm text-gray-500"},Te={key:2,class:"space-y-6"},De={class:"flex items-center justify-between gap-4 mb-4"},Be={class:"text-cyan-400"},Me={class:"text-sm text-gray-400"},Pe={class:"flex gap-3"},Ue={class:"border-4 border-cyan-500/50 rounded-lg shadow-[0_0_30px_rgba(34,211,238,0.3)] inline-block"},ze={class:"max-w-[1200px] bg-gray-900 border border-purple-500/30 rounded-lg p-4 text-sm"},Fe={class:"grid grid-cols-2 gap-4 text-gray-300"},Xe=B({__name:"[slug]",async setup(t){let d,A;const v=he().params.slug,{data:o,pending:y,error:_}=([d,A]=ge(()=>xe(v)),d=await d,A(),d),l=S(()=>o.value?{headline:o.value.headline||o.value.title,title:o.value.title,severity:o.value.severity,categories:o.value.category||[],createdAt:o.value.createdAt,tags:o.value.category||[],tweet_text:o.value.twitter_post||o.value.headline}:null),I=S(()=>{if(!l.value)return[];const h=[];if(l.value.tweet_text){const a=l.value.tweet_text.match(/#\w+/g)||[];h.push(...a)}return l.value.tags&&h.length<8&&h.push(...l.value.tags.slice(0,8-h.length)),h.slice(0,8)}),i=()=>{window.location.reload()};return ye({title:`OG Image Preview - ${v}`,meta:[{name:"robots",content:"noindex, nofollow"}]}),(h,a)=>{const u=Y,M=Z,x=Oe;return $(),E("div",Ee,[c(y)?($(),E("div",$e,[f(u,{name:"heroicons:arrow-path-20-solid",class:"w-12 h-12 animate-spin mx-auto mb-4 text-cyan-400"}),a[0]||(a[0]=n("p",{class:"text-gray-400"},"Loading article data...",-1))])):c(_)||!c(l)?($(),E("div",je,[f(u,{name:"heroicons:exclamation-circle-20-solid",class:"w-12 h-12 mx-auto mb-4 text-red-500"}),a[1]||(a[1]=n("h2",{class:"text-2xl font-bold mb-2 text-gray-300"},"Article Not Found",-1)),n("p",Le,C(c(_)?.message||"The article data could not be loaded."),1),n("p",Ne,"Slug: "+C(c(v)),1)])):($(),E("div",Te,[n("div",De,[n("div",Be,[a[2]||(a[2]=n("h1",{class:"text-2xl font-bold"},"OG Image Preview",-1)),n("p",Me,C(c(v)),1)]),n("div",Pe,[n("button",{class:"px-4 py-2 bg-cyan-500/20 border-2 border-cyan-500 text-cyan-300 rounded-lg font-bold hover:bg-cyan-500/30 transition-all",onClick:i},[f(u,{name:"heroicons:arrow-path-20-solid",class:"w-4 h-4 inline mr-2"}),a[3]||(a[3]=R(" Refresh ",-1))]),f(M,{to:`/articles/${c(v)}/`,class:"px-4 py-2 bg-purple-500/20 border-2 border-purple-500 text-purple-300 rounded-lg font-bold hover:bg-purple-500/30 transition-all"},{default:_e(()=>[f(u,{name:"heroicons:eye-20-solid",class:"w-4 h-4 inline mr-2"}),a[4]||(a[4]=R(" View Article ",-1))]),_:1},8,["to"])])]),n("div",Ue,[f(x,{article:c(l),entities:c(I)},null,8,["article","entities"])]),n("div",ze,[n("div",Fe,[a[8]||(a[8]=n("div",null,[n("strong",{class:"text-purple-400"},"Dimensions:"),R(" 1200Ã—675px (16:9) ")],-1)),n("div",null,[a[5]||(a[5]=n("strong",{class:"text-purple-400"},"Severity:",-1)),R(" "+C(c(l).severity?.toUpperCase()),1)]),n("div",null,[a[6]||(a[6]=n("strong",{class:"text-purple-400"},"Categories:",-1)),R(" "+C(c(l).categories?.join(", ")||"None"),1)]),n("div",null,[a[7]||(a[7]=n("strong",{class:"text-purple-400"},"Entities:",-1)),R(" "+C(c(I).length)+" found ",1)])])])]))])}}});export{Xe as default};
